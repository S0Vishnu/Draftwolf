:root {
  /* --- Dracula Color Palette --- */
  --dracula-bg: #000000;         /* Abyss Black */
  --dracula-panel: #120707;      /* Near-Black Brown */
  --dracula-accent: #5B0000;     /* Oxblood Red */
  --dracula-accent-hover: #8C1D1D; /* Deep Crimson */
  --dracula-fg: #EDE8E6;         /* Bone White */
  --dracula-highlight: #E59898;  /* Blood Pink */
  --dracula-selection: #44475a;  /* Keep standard Dracula selection for text selection if needed */
  
  /* --- Semantic Variable Mapping --- */
  
  /* Surfaces */
  --bg-app: var(--dracula-bg);
  --bg-sidebar: var(--dracula-panel);
  --bg-sidebar-secondary: var(--bg-sidebar); 
  --bg-header: var(--dracula-bg);
  --bg-content: var(--dracula-bg);
  --bg-panel: var(--dracula-panel);
  --bg-card: #1a0b0b; /* Slightly lighter than panel */
  --bg-hover: #2a1010; 
  --bg-selected: rgba(91, 0, 0, 0.2); 
  --bg-input: #080303;
  --bg-shimmer: rgba(91, 0, 0, 0.1);

  /* Borders */
  --border-default: rgba(91, 0, 0, 0.3); /* Oxblood low opacity */
  --border-subtle: rgba(91, 0, 0, 0.15);
  --border-input: rgba(91, 0, 0, 0.4);
  --border-accent: var(--dracula-accent);

  /* Text */
  --text-main: var(--dracula-fg);
  --text-secondary: rgba(237, 232, 230, 0.7);
  --text-muted: rgba(237, 232, 230, 0.4);
  --text-on-accent: var(--dracula-fg);

  /* Actions */
  --accent-primary: var(--dracula-accent);
  --accent-secondary: var(--dracula-highlight);
  --accent-hover: var(--dracula-accent-hover);
  --danger: #cf6679; /* Keep standard danger or map to something else? Using standard for safety */
  
  /* Overrides for specific Dracula look */
  --radius-sm: 2px;
  --radius-md: 4px;
  --radius-lg: 6px;
}

/* --- Global Overrides --- */

/* App Background & Typography */
body {
  background-color: var(--dracula-bg);
  font-family: 'Inter', sans-serif; /* Conserve font */
}

/* Flat surfaces, no glassmorphism */
.sidebar, .inspector-panel, .top-bar, .toolbar, .ext-card {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  background: var(--bg-panel);
  border-color: var(--border-default);
}

.ext-card {
  box-shadow: none;
  background: var(--bg-card);
}

/* Panels feeling "carved" */
.inspector-panel {
  box-shadow: inset 2px 0 10px rgba(0,0,0,0.5);
}

/* --- Button System --- */

/* Default Button Styles targeting common button classes */
button, 
.primary-btn, 
.ext-btn-primary,
.inspector-btn,
.action-btn {
  position: relative;
  overflow: hidden;
  background-color: var(--dracula-panel) !important;
  color: var(--dracula-fg) !important;
  border: 1px solid rgba(91, 0, 0, 0.4) !important;
  border-radius: 6px !important;
  transition: transform 0.16s cubic-bezier(0.22, 1, 0.36, 1), 
              border-color 0.2s ease,
              box-shadow 0.2s ease;
  z-index: 1;
}

/* Hover State - Tilt & Eye Glow & Blood Spill */
button:not(:disabled):hover, 
.primary-btn:not(:disabled):hover,
.ext-btn-primary:not(:disabled):hover,
.inspector-btn:not(:disabled):hover,
.action-btn:not(:disabled):hover {
  /* Tilt Effect */
  transform: perspective(600px) rotateX(3deg) rotateY(-3deg) scale(1.02);
  border-color: var(--dracula-accent-hover) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  cursor: pointer;
  
  /* Eye Glow Effect */
  background-image: 
    radial-gradient(circle at 30% 10%, rgba(140, 29, 29, 0.4) 0%, transparent 20%),
    radial-gradient(circle at 70% 10%, rgba(140, 29, 29, 0.4) 0%, transparent 20%);
}

/* Blood Spill Animation Element */
button::after, 
.primary-btn::after,
.ext-btn-primary::after,
.inspector-btn::after,
.action-btn::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 200%;
  height: 100%;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(140, 29, 29, 0.2) 20%, 
    rgba(140, 29, 29, 0.6) 50%, 
    rgba(140, 29, 29, 0.2) 80%, 
    transparent 100%
  );
  transform: skewX(-20deg);
  pointer-events: none;
  z-index: -1;
  opacity: 0;
  transition: opacity 0.2s;
}

button:not(:disabled):hover::after, 
.primary-btn:not(:disabled):hover::after,
.ext-btn-primary:not(:disabled):hover::after,
.inspector-btn:not(:disabled):hover::after,
.action-btn:not(:disabled):hover::after {
  opacity: 1;
  animation: bloodSpill 3s linear infinite;
}

@keyframes bloodSpill {
  0% { transform: translateX(0) skewX(-20deg) translateY(0); }
  50% { transform: translateX(10%) skewX(-20deg) translateY(2px); }
  100% { transform: translateX(0) skewX(-20deg) translateY(0); }
}

/* Active/Pressed State */
button:not(:disabled):active, 
.primary-btn:not(:disabled):active,
.ext-btn-primary:not(:disabled):active,
.inspector-btn:not(:disabled):active,
.action-btn:not(:disabled):active {
  transform: perspective(600px) rotateX(0deg) rotateY(0deg) translateY(1px) !important;
  border-color: var(--dracula-accent);
}

/* Disabled State */
button:disabled, 
.primary-btn:disabled,
.ext-btn-primary:disabled {
  background-color: #1a1a1a !important;
  color: #666 !important;
  border-color: transparent !important;
  transform: none !important;
  cursor: not-allowed;
  box-shadow: none;
}

button:disabled::after, 
.primary-btn:disabled::after,
.ext-btn-primary:disabled::after {
  display: none;
}

/* --- File List & Dense UI --- */

/* List Row Selection */
.list-row.selected {
  background-color: transparent;
  position: relative;
}

/* Vertical Oxblood Indicator */
.list-row.selected::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background-color: var(--dracula-accent);
}

/* Subtle pink tint */
.list-row.selected::after {
  content: '';
  position: absolute;
  inset: 0;
  background-color: var(--dracula-highlight);
  opacity: 0.05;
  pointer-events: none;
  z-index: -1;
}

/* Context Menu Motion */
.context-menu, .options-popover {
  animation: menuFadeIn 0.24s cubic-bezier(0.22, 1, 0.36, 1);
  transform-origin: top left;
  background-color: var(--dracula-panel);
  border: 1px solid var(--border-default);
}

@keyframes menuFadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Loading States */
.skeleton, .loading-shimmer {
  background-color: rgba(91, 0, 0, 0.1);
  background-image: linear-gradient(
    90deg, 
    rgba(91, 0, 0, 0.1) 0px, 
    rgba(91, 0, 0, 0.2) 40px, 
    rgba(91, 0, 0, 0.1) 80px
  );
  background-size: 600px;
  animation: shimmer 3s infinite linear;
}

@keyframes shimmer {
  0% { background-position: -100px; }
  100% { background-position: 300px; }
}
